define(["jquery","core/ajax","core/notification"],function($,Ajax,Notification){return{init:function(){var categorySelect=$("#id_categoryid");var courseSelect=$("#id_courseid");console.log("SCORM Video Maker: Initializing category/course selector");console.log("Category select found:",categorySelect.length);console.log("Course select found:",courseSelect.length);if(!categorySelect.length||!courseSelect.length){console.log("SCORM Video Maker: Missing select elements, aborting");return}categorySelect.on("change",function(){var categoryId=$(this).val();console.log("SCORM Video Maker: Category changed to:",categoryId);courseSelect.empty();courseSelect.append($("<option>",{value:"",text:M.util.get_string("choosedots","moodle")}));if(!categoryId){return}console.log("SCORM Video Maker: Calling AJAX to load courses...");var promises=Ajax.call([{methodname:"local_scormvideomaker_get_courses_by_category",args:{categoryid:parseInt(categoryId)}}]);promises[0].done(function(courses){console.log("SCORM Video Maker: Received courses:",courses);if(!courses||courses.length===0){console.log("SCORM Video Maker: No courses found for this category");courseSelect.append($("<option>",{value:"",text:"No courses in this category"}));return}$.each(courses,function(index,course){courseSelect.append($("<option>",{value:course.id,text:course.name}))})}).fail(function(error){console.error("SCORM Video Maker: AJAX error:",error);Notification.exception(error)})})}}});
